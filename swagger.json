{
    "swagger": "2.0",
    "info": {
        "version": "1.0.0",
        "title": "Dashboard API"
    },
    "paths": {
        "/plans": {
            "get": {
                "description": "Gets all `Plans`.\n",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "title": "ArrayOfPlans",
                            "type": "array",
                            "items": {
                                "title": "Plan",
                                "type": "object",
                                "properties": {
                                    "id": {
                                        "type": "integer"
                                    },
                                    "name": {
                                        "type": "string"
                                    },
                                    "price": {
                                        "type": "number",
                                        "format": "double"
                                    },
                                    "record_limit": {
                                        "type": "integer"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/users": {
            "post": {
                "description": "Creates a `User`.",
                "responses": {
                    "201": {
                        "description": "Successful response",
                        "schema": {
                            "$ref": "#/definitions/User"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "user",
                        "required": true,
                        "in": "body",
                        "description": "A `User` object",
                        "schema": {
                            "$ref": "#/definitions/User"
                        }
                    }
                ]
            }
        },
        "/users/{id}": {
            "get": {
                "description": "Gets a `User`.\n",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "$ref": "#/definitions/User"
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "description": "User identifier",
                    "type": "integer",
                    "required": true
                }
            ],
            "put": {
                "description": "Updates a `User`.\n",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "$ref": "#/definitions/User"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "user",
                        "required": true,
                        "in": "body",
                        "description": "A `User` object",
                        "schema": {
                            "$ref": "#/definitions/User"
                        }
                    }
                ]
            }
        },
        "/users/{id}/applications": {
            "get": {
                "description": "Get the 'Applications' that the user is associated with.\n",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "title": "ArrayOfApplications",
                            "type": "array",
                            "items": {
                                "title": "Application",
                                "$ref": "#/definitions/Application"
                            }
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "description": "User identifier",
                        "type": "integer",
                        "required": true
                    }
                ]
            }
        },
        "/users/{id}/permissions": {
            "get": {
                "description": "Gets `Permissions` for an application user",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "title": "ArrayOfApplicationPermissions",
                            "type": "array",
                            "items": {
                                "title": "ApplicationPermission",
                                "$ref": "#/definitions/ApplicationPermission"
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "description": "User identifier",
                    "type": "integer",
                    "required": true
                },
                {
                    "name": "application_id",
                    "in": "query",
                    "description": "Application identifier",
                    "type": "integer",
                    "required": false
                }
            ]
        },
        "/users/{id}/payment_methods": {
            "get": {
                "description": "Get `PaymentMethod`'s for a user.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "title": "ArrayOfPaymentMethods",
                            "type": "array",
                            "items": {
                                "title": "PaymentMethod",
                                "$ref": "#/definitions/PaymentMethod"
                            }
                        }
                    }
                }
            },
            "post": {
                "description": "Creates a `PaymentMethod` for a user.",
                "responses": {
                    "201": {
                        "description": "Successful response",
                        "schema": {
                            "title": "PaymentMethod",
                            "$ref": "#/definitions/PaymentMethod"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "payment_method",
                        "in": "body",
                        "description": "A `PaymentMethod` object",
                        "required": true,
                        "schema": {
                            "title": "PaymentMethod",
                            "$ref": "#/definitions/PaymentMethod"
                        }
                    }
                ]
            },
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "description": "User identifier",
                    "type": "integer",
                    "required": true
                }
            ]
        },
        "/users/{id}/payment_methods/{payment_method_id}": {
            "get": {
                "description": "Get a `PaymentMethod` for a user.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "title": "PaymentMethod",
                            "$ref": "#/definitions/PaymentMethod"
                        }
                    }
                }
            },
            "put": {
                "description": "Update a `PaymentMethod`'s for the user.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "title": "PaymentMethod",
                            "$ref": "#/definitions/PaymentMethod"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "payment_method",
                        "in": "body",
                        "description": "A `PaymentMethod` object",
                        "required": true,
                        "schema": {
                            "title": "PaymentMethod",
                            "$ref": "#/definitions/PaymentMethod"
                        }
                    }
                ]
            },
            "delete": {
                "description": "Delete a `PaymentMethod` for a user.",
                "responses": {
                    "204": {
                        "description": "Payment method deleted"
                    }
                }
            },
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "description": "User identifier",
                    "type": "integer",
                    "required": true
                },
                {
                    "name": "payment_method_id",
                    "in": "path",
                    "description": "Payment method identifier",
                    "type": "integer",
                    "required": true
                }
            ]
        },
        "/applications": {
            "post": {
                "description": "Creates an `Application`.",
                "responses": {
                    "201": {
                        "description": "Successful response",
                        "schema": {
                            "$ref": "#/definitions/Application"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "application",
                        "in": "body",
                        "description": "An `Application` object",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Application"
                        }
                    }
                ]
            }
        },
        "/applications/{id}": {
            "get": {
                "description": "Gets an `Application`.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "$ref": "#/definitions/Application"
                        }
                    }
                }
            },
            "put": {
                "description": "Updates an `Application`.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "$ref": "#/definitions/Application"
                        }
                    }
                },
                "parameters": [
                    {
                        "name": "application",
                        "in": "body",
                        "description": "An `Application` object",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/Application"
                        }
                    }
                ]
            },
            "delete": {
                "description": "Deletes an `Application`.",
                "responses": {
                    "204": {
                        "description": "Application deleted"
                    }
                }
            },
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "description": "Application identifier",
                    "type": "integer",
                    "required": true
                }
            ]
        },
        "/applications/{id}/permissions": {
            "get": {
                "description": "Gets `Permissions` for an application",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "title": "ArrayOfApplicationPermissions",
                            "type": "array",
                            "items": {
                                "title": "ApplicationPermission",
                                "$ref": "#/definitions/ApplicationPermission"
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                  "name": "id",
                  "in": "path",
                  "description": "Application identifier",
                  "type": "integer",
                  "required": true
                }
            ]
        },
        "/applications/{id}/keys": {
            "get": {
                "description": "Gets `Keys` for an application.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "properties": {
                                "id": {
                                    "type": "integer"
                                },
                                "key": {
                                    "type": "string"
                                },
                                "scope": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "parameters": [
                {
                    "name": "id",
                    "in": "path",
                    "description": "Application identifier",
                    "type": "integer",
                    "required": true
                }
            ]
        },
        "/authentication_providers": {
            "get": {
                "description": "Gets a list of supported authentication providers.",
                "responses": {
                    "200": {
                        "description": "Successful response",
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "login_url": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "User": {
            "type": "object",
            "required": ["email"],
            "properties": {
                "id": {
                    "type": "integer"
                },
                "email": {
                    "type": "string"
                }
            }
        },
        "PaymentMethod": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "integer"
                },
                "user_id": {
                    "type": "integer"
                },
                "billing_name": {
                    "type": "string"
                },
                "billing_address_line1": {
                    "type": "string"
                },
                "billing_address_line2": {
                    "type": "string"
                },
                "billing_address_city": {
                    "type": "string"
                },
                "billing_address_region": {
                    "type": "string"
                },
                "billing_address_country": {
                    "type": "string"
                },
                "billing_card_type": {
                    "type": "string"
                },
                "billing_card_last4": {
                    "type": "string"
                },
                "billing_card_expiry_month": {
                    "type": "string"
                },
                "billing_card_expiry_year": {
                    "type": "string"
                }
            }
        },
        "Application": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "integer"
                },
                "plan_id": {
                    "type": "integer"
                }
            }
        },
        "ApplicationPermission": {
            "type": "object",
            "properties": {
                "user_id": {
                    "type": "integer"
                },
                "application_id": {
                    "type": "integer"
                },
                "scopes": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                }
            }
        }
    }
}
